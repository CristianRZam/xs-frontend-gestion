<div class="flex flex-col gap-2 w-full">
  <!-- Contenedor principal -->
  <div
    class="flex items-center gap-2 border rounded-md px-3 py-2
           bg-white dark:bg-[#09090b] border-gray-300 dark:border-gray-600
           shadow-sm transition-colors">

    <!-- Input real oculto -->
    <input
      type="file"
      class="hidden"
      [accept]="accept"
      [disabled]="disabled"
      [id]="id"
      #fileInput
      (change)="onFileSelected($event)" />

    <!-- Botón seleccionar -->
    <button
      type="button"
      class="px-3 py-1.5 rounded-lg text-sm font-medium
             bg-blue-600 hover:bg-blue-700 focus:ring-2 focus:ring-blue-400
             text-white transition disabled:opacity-50"
      (click)="fileInput.click()"
      [disabled]="disabled">
      Seleccionar
    </button>

    <!-- Nombre del archivo -->
    <span
      class="flex-1 text-sm truncate text-gray-700 dark:text-gray-300"
      [class.italic]="!fileName">
      {{ fileName || placeholder }}
    </span>

    <!-- Botón limpiar -->
    <button
      *ngIf="file"
      type="button"
      class="p-1.5 rounded-full hover:bg-red-100 dark:hover:bg-red-800
             text-red-500 dark:text-red-400 transition"
      (click)="clearFile()">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none"
           viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/>
      </svg>
    </button>
  </div>
</div>

<!-- Mensaje de error -->
@if (control.errors && control.touched) {
  <p-message
    class="xs-error-message mt-1"
    severity="error"
    size="small"
    variant="simple">
    {{ control.errors![objectFn.keys(control.errors!)[0]] }}
  </p-message>
}
